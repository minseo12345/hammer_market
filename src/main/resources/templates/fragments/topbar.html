<th:block th:fragment="topbar" xmlns:sec="http://www.w3.org/1999/xhtml">
    <nav class="topbar">
        <div class="navbar-content">
            <a th:href="@{'/items/list'}">
                <img th:src="@{/img/logo.png}" alt="로고" class="logo">
            </a>
            <div class="navbar-links">
                <!-- 채팅 링크 -->
                <a href="#" th:href="@{/chat}" class="d-flex align-items-center">
                    <img th:src="@{/img/chat.png}" alt="채팅" class="chat-icon" style="width: 30px; height: 25px;">
                </a>
                <a th:href="@{'/profile/myProfile'}">내정보</a>
                <a th:href="@{/cart}">장바구니</a>
                <a href="/logout">로그아웃</a>
                <a href="#" id="notification-icon" class="d-flex align-items-center" data-bs-toggle="modal" data-bs-target="#notification-modal">
                    <img th:src="@{/img/bell1.png}" alt="알림 아이콘" style="width: 30px; height: 25px;">
                </a>

                <!--<a href="#" id="notification-icon" style="cursor: pointer;">
                    <img th:src="@{/img/bell1.png}" alt="알림 아이콘" style="width: 30px; height: 25px;">
                </a>-->
                <!-- 알림 모달 -->
                <!--<div id="notification-modal" class="modal" style="display: none;">
                    <div class="modal-content" style="padding: 20px; background: white; border: 1px solid #ccc;">
                        <h2>알림</h2>
                        <div th:replace="~{fragments/notifications :: #notification-list}"></div>
                        <button id="close-modal-button">닫기</button>
                    </div>
                </div>-->
<!--                 알림 모달 -->
                <div class="modal fade" id="notification-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="notificationModalLabel">
                        <div class="modal-dialog modal-dialog-scrollable">
                    <div class="modal-dialog modal-dialog-scrollable"> <!-- Scrollable class added -->
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="notificationModalLabel">알림</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div th:replace="~{fragments/notifications :: #notification-list}"></div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <span id="userId" th:text="${userId ?: '비로그인 사용자'}"></span>
            <div sec:authorize="!isAuthenticated()">
                <a href="/login">로그인</a>
            </div>
        </div>
        </div>
    </nav>

    <!-- 알림 관련 스크립트 -->
    <script th:src="@{/js/fragments/notifications.js}"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs/lib/stomp.min.js"></script>

    <!-- 스타일 -->

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link th:href="@{/css/fragments/notifications.css}" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</th:block>
